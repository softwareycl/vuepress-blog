# chrome调试技巧

## Elements

### 通过 'h' 来隐藏元素

按一下 ``h`` 就可以隐藏你在元素面板中选择的元素。再次按下 ``h`` 可以使它出现。某些的时候这很有用：例如你想截图，但你想去掉里面的敏感信息

### 拖动 & 放置 元素

当你想看看页面的某一部分在 DOM 树的不同位置的显示效果时，只需要鼠标拖动放置它到指定的位置，或者 ctrl + '↑'/'↓' 移动选定元素

### 一键展开所有 DOM 元素

调试元素时，在层级比较深的情况下，你是不是也经常一个个展开去调试？有一种更加快捷的方式

1. 按住 alt 键 + click（需要展开的最外层元素）

### 给选中元素添加一个 class 名

快速给元素添加class

![3-12](./images/3-12.png)

### 修改元素的盒模型大小

快速修改元素的盒模型大小(margin/padding/width/height等)

![3-13](./images/3-13.png)

## Console

### 控制台获取 Elements 面板选中的元素

调试网页时通过 ``Elements`` 面板选中元素后，如果想通过JS知道它的一些属性，如宽、高、位置等怎么办呢？

1. 通过 ``Elements`` 选择要调试的元素
2. 控制台直接用 ``$0`` 访问

![3-4](./images/3-4.png)

理所当然，``$1`` 是对上一次我们选择的节点的引用，``$2`` 是对在那之前选择的节点的引用，等等。一直到 ``$4``

### 控制台引用上一次执行的结果

调试的过程中，你经常会通过打印查看一些变量的值，但如果你想看一下上次执行的结果呢？再输一遍表达式吗？

这时候 ``$_`` 就派上了用场，``$_`` 是对上次执行的结果的 引用：

![3-6](./images/3-6.png)

### "$"和"$$"选择器

在控制台使用 ``document.querySelector`` 和 ``document.querySelectorAll`` 选择当前页面的元素是最常见的需求了，不过着实有点太长了，咱们可以使用 ``$`` 和 ``$$`` 替代。

![3-7](./images/3-7.png)

### console.table

console.table 这个小技巧在开发者中可能并没有多少人知道: 如果有一个 数组 (或者是 类数组 的对象，或者就是一个 对象 )需要打印，你可以使用 console.table 方法将它以一个漂亮的表格的形式打印出来。它不仅会根据数组中包含的对象的所有属性，去计算出表中的列名，而且这些列都是可以 缩放甚至 还可以排序!!!

如果你觉得展示的列太多了，使用第二个参数，传入你想要展示的列的名字:

![3-10](./images/3-10.png)

> 对于后台而言，只有 node 版本大于 10 以上， console.table 才能起作用

### 给你的 console.log 加上 CSS 样式

如果你给打印文本加上 %c 那么 console.log 的第二个参数就变成了CSS 规则！这个特性可以让你的日志脱颖而出

```js
console.log('%cCL', 'color:lightblue;font-size:30px;margin-left:200px')
```


![3-11](./images/3-11.png)

## Sources

### Add conditional breakpoint条件断点的妙用

假设有下面这段代码，咱们希望食物名字是 巧克力 时才触发断点，可以怎么弄？

```js
const foods = [
  {
    name: '奶茶',
    price: 10
  },
  {
    name: '巧克力',
    price: 15
  },
  {
    name: '汉堡',
    price: 20
  },
]

foods.forEach((v) => {
  console.log(v.name, v.price)
})
```

1. 选中 Sources
2. 右击行号，选择 Add conditional breakpoint...(添加条件断点)
3. 或者右击一个已经设置的断点并且选择 Edit breakpoint(编辑断点)
4. 然后输入一个执行结果为 true 或者 false 的表达式（它的值其实不需要完全为 true 或者 false 尽管那个弹出框的描述是这样说的）

![3-8](./images/3-8.jpg)

![3-9](./images/3-9.png)

## Network

### 一键重新发起请求

在与后端接口联调或排查线上BUG时，经常遇到需要再次发起一次请求的情况

重发请求，这有一种简单到发指的方式。

1. 选中 ``Network``
2. 点击 ``Fetch/XHR``
3. 选择要重新发送的请求
4. 右键选择 ``Replay XHR``

![3-1](./images/3-1.jpg)

### 在控制台快速发起请求

还是联调或修BUG的场景，针对同样的请求，有时候需要修改入参重新发起，有啥快捷方式？

1. 选中 ``Network``
2. 点击 ``Fetch/XHR``
3. 选择 ``Copy as fetch``
4. 控制台粘贴代码
5. 修改参数，回车搞定

![3-2](./images/3-2.jpg)

![3-3](./images/3-3.png)

## Command 命令

### 截屏

有时会有对网页截屏的需求，一屏还好，系统自带的截屏或者微信截图等都可以办到，但是要求将超出一屏的内容也截下来咋办呢？

1. 准备好需要截屏的内容
2. ``cmd + shift + p`` 执行 ``Command`` 命令
3. 输入 ``Capture full size screenshot`` 按下回车

![3-5](./images/3-5.png)

**如果要截取选中的部分元素呢？**

答案也很简单，第三步输入 ``Capture node screenshot`` 即可